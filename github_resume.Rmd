---
title: "Resume"
author: "Caspar J. van Lissa"
date: "11/12/2019"
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_dir = "docs", output_file = "index.html") })    
output:
  html_document:
    toc: true
    toc_depth: 2
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, results = "asis", eval = TRUE)
print_cv <- function(table, ...){
  Args <- as.list(match.call()[-c(1, 2)])
  cat(apply(table, 1, function(x){
    do.call(paste0, Args)
}), sep = "  \n")
}
library(knitr)
library(kableExtra)
library(dplyr)
library(scholar)
id <- 'ub59lUMAAAAJ'

## Get his profile
scholar_profile <- get_profile(id)
```

## Experience

```{r results = "asis", echo = FALSE}
exp <- read.csv("Experience.csv", stringsAsFactors = FALSE)
exp <- exp[order(exp$Order, decreasing = TRUE), ]
exp$Begin <- gsub(" –.+$", "", exp$dates)
exp$End <- gsub("^.+ – ", "", exp$dates)

exp %>%  mutate(Employer=text_spec(Employer, "html", tooltip=Description)) %>% 
  mutate(Department=text_spec(Department, "html", tooltip=Description)) %>% 
  mutate(Position=text_spec(Position, "html", tooltip=Description)) %>% 
  mutate(Begin=text_spec(Begin, "html", tooltip=Description)) %>% 
  mutate(End=text_spec(End, "html", tooltip=Description)) %>% 
    select(Employer,Department, Position, Begin, End) %>% kable("html", escape=F) %>% 
    kable_styling(bootstrap_options = c("striped", "hover"))
```

## Publications

According to Google Scholar, my work has been cited `r scholar_profile$total_cites` times (G-index: 15, H-index: `r scholar_profile$h_index`, i10-index: `r scholar_profile$i10_index`).

```{r results = "asis", echo = FALSE}
pub <- read.csv("My publications.csv", stringsAsFactors = FALSE, encoding = "UTF-8")
#pub$Item.Type <- ifelse(pub$Item.Type == "journalArticle", "", " (Book chapter)")
num_authors <- lengths(regmatches(pub$Author, gregexpr(";", pub$Author)))
pub$Author[num_authors > 4] <- gsub(";.+$", " et al\\.", pub$Author[num_authors > 4])
pub$Title[grepl(":", pub$Title)] <- gsub(":.+$", "", pub$Title[grepl(":", pub$Title)])
pub$order <- order(pub$Publication.Year, decreasing = TRUE, na.last = FALSE)
pub$Publication.Year[is.na(pub$Publication.Year)] <- "in press"
pub$DOI[!pub$DOI == ""] <- paste0("https://doi.org/", pub$DOI[!pub$DOI == ""])
pub$DOI[pub$DOI == ""] <- pub$Url[pub$DOI == ""]
pub <- data.frame(pub)
pub$Title <- paste0('<a href = "', pub$DOI, '">', pub$Title, '</a>')
pub$Publication.Title <- paste0('*', pub$Publication.Title, '*')
pub <- pub[pub$order, c("Author", "Publication.Year", "Title", "Publication.Title")]
rownames(pub) <- NULL
names(pub) <- c("Authors", "Year", "Title", "Publication")
pub %>% kable("html", escape=F) %>% 
    kable_styling(bootstrap_options = c("striped", "hover"))
```

## Software

```{r results = "asis", echo = FALSE}
pack <- data.frame(read.csv("R-packages.csv", stringsAsFactors = FALSE))
pack <- pack[order(pack$downloads, decreasing = TRUE, na.last = TRUE), ]
pack$downloads[!is.na(pack$downloads)] <- paste0(pack$downloads[!is.na(pack$downloads)], " downloads. ")
pack$downloads[is.na(pack$downloads)] <- ""
pack$Title <- paste0('<a href = "', pack$url, '">', pack$title, '</a>')
pack$Outlet <- paste0('*', pack$repo, '*')
pack$Downloads <- pack$downloads
pack$Authors <- pack$authors
rownames(pack) <- NULL
pack[,c("Authors", "Title", "Downloads", "Outlet")] %>%
  kable("html", escape=F) %>% 
    kable_styling(bootstrap_options = c("striped", "hover"))
```

## Teaching

```{r results = "asis", echo = FALSE}
teach <- data.frame(read.csv("teaching_cleaned.csv", stringsAsFactors = FALSE))
super <- data.frame(read.csv("supervision.csv", stringsAsFactors = FALSE))
sum_sup <- tapply(as.numeric(super$Students), factor(super$Level), sum)
```

Since my first teaching appointment in 2006, I have taught continuously, in `r nrow(teach)` courses, from the high-school to post-graduate (e.g., summer schools, pre-conference workshops) level. I have lectured in `r sum(teach$Hoorcolleges)` courses, taught tutorials in `r sum(teach$Werkgroepen)`, coordinated `r sum(teach$Coordinatie)`, and developed the material for `r sum(teach$Ontwikkeling.herziening)` courses.

<details>
  <summary>Click here for a detailed overview of teaching activities</summary>
```{r results = "asis", echo = FALSE}
rownames(teach) <- NULL
names(teach) <- c("Course", "Year", "Meetings", "students", "Lectures", "Tutorials", "Coordination", "Organization", "Syllabus", "Slides", "Digital aids", "Course development", "Details")
teach %>%
  kable("html", escape=F) %>% 
  add_header_above(c("Course details" = 4, "Responsibilities" = 8, " " =1)) %>%
    kable_styling(bootstrap_options = c("striped", "hover"))
```
</details> 

I have supervised `r paste0(paste0(sum_sup[1:(length(sum_sup)-1)], " ", names(sum_sup)[1:(length(sum_sup)-1)], collapse = ", "), ", and ", tail(sum_sup, 1), " ", tail(names(sum_sup), 1), collapse = "")` students.

<details>
  <summary>Click here for a detailed overview of supervised students</summary>
```{r results = "asis", echo = FALSE}
rownames(super) <- NULL
super %>%
  kable("html", escape=F) %>% 
    kable_styling(bootstrap_options = c("striped", "hover"))
```
</details> 

## Conference attendance

```{r results = "asis", echo = FALSE}
conf <- data.frame(read.csv("conferences.csv", stringsAsFactors = FALSE))
```

I am very active at international conferences, and have contributed to `r nrow(conf)` conferences since my first attendance in 2012.

<details>
  <summary>Click here for a detailed overview of conferences</summary>
```{r results = "asis", echo = FALSE}
conf <- conf[order(conf$X, decreasing = TRUE), c("Organization", "City", "Country", "Date")]
rownames(conf) <- NULL
conf %>%
  kable("html", escape=F) %>% 
    kable_styling(bootstrap_options = c("striped", "hover"))
```
</details>

## Managerial activities

```{r results = "asis", echo = FALSE}
teach <- data.frame(read.csv("teaching_cleaned.csv", stringsAsFactors = FALSE))

```

Since my first teaching appointment in 2006, I have taught continuously, in `r nrow(teach)` courses, from the high-school to post-graduate (e.g., summer schools, pre-conference workshops) level. I have lectured in `r sum(teach$Hoorcolleges)` courses, taught tutorials in `r sum(teach$Werkgroepen)`, coordinated `r sum(teach$Coordinatie)`, and developed the material for `r sum(teach$Ontwikkeling.herziening)` courses. Additionally, I have supervised 

<!-- 

managerial activities, outreach/public activities, international activities, and indicators of external recognition such as grants, awards, invited lectures, editorial board memberships, et cetera (max. 2 pages, excluding publication list). 


-->
